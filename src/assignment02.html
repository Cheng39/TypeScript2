<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>聚餐分帳計算器</title>
    <style>
        /* CSS 样式将在后续步骤中添加 */
    </style>
</head>
<body>
    <h1>聚餐分帳計算器</h1>
    <form id="bill-form">
        <div class="input-group">
            <label>日期: <input type="date" id="date" required /></label>
            <label>餐廳名稱: <input type="text" id="location" required /></label>
            <label>小費百分比: <input type="number" id="tipPercentage" min="0" max="100" required /></label>
        </div>
        <h2>收費項目</h2>
        <div id="items-container"></div>
        <button type="button" id="add-item">新增餐點</button>
        <input type="submit" value="計算分帳" />
    </form>
    <div id="result-container" style="display:none;"></div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const itemsContainer = document.getElementById('items-container');
    const addItemButton = document.getElementById('add-item');

    addItemButton.addEventListener('click', () => {
        const itemHTML = `
            <div class="input-group">
                <label>餐點名稱: <input type="text" class="item-name" required /></label>
                <label>價格（元）: <input type="number" class="item-price" min="0" step="0.1" required /></label>
                <label>是否均分: <input type="checkbox" class="is-shared" /></label>
                <label>付款人: <input type="text" class="payer" placeholder="付款人名稱（僅對不均分項目有效）" /></label>
                <button type="button" class="remove-item">刪除</button>
            </div>`;
        itemsContainer.insertAdjacentHTML('beforeend', itemHTML);

        // 添加删除按钮的事件监听器
        const removeItemButtons = document.querySelectorAll('.remove-item');
        removeItemButtons[removeItemButtons.length - 1].addEventListener('click', function() {
            this.parentElement.remove();
        });
    });
});
document.addEventListener('DOMContentLoaded', () => {
    // ... (之前的 JavaScript 代码)

    const billForm = document.getElementById('bill-form');
    const resultContainer = document.getElementById('result-container');

    billForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const date = document.getElementById('date').value;
        const location = document.getElementById('location').value;
        const tipPercentage = parseFloat(document.getElementById('tipPercentage').value);

        const items = Array.from(document.querySelectorAll('.input-group')).map(group => {
            const name = group.querySelector('.item-name').value;
            const price = parseFloat(group.querySelector('.item-price').value);
            const isShared = group.querySelector('.is-shared').checked;
            const person = isShared ? '' : group.querySelector('.payer').value;
            return isShared ? { name, price, isShared: true } : { name, price, isShared: false, person };
        });

        const billInput = { date, location, tipPercentage, items };
        const billOutput = splitBill(billInput);
        displayResults(billOutput);
    });

    // ... (分账计算和结果显示函数将在后续步骤中添加)
});
        // JavaScript 代码将在后续步骤中添加
    </script>
</body>
</html>